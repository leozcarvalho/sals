import{B as h,A as i,r as n,q as k,o as y,a as C,b as x,e as A,g as r,m as d,w as B,d as V,F as g}from"./index.1cfa7469.js";import{_ as q}from"./BaseList.360694cc.js";import{B as F}from"./BaseModalForm.58b6ae3a.js";import"./toast.022af5e3.js";import"./index.26f640d7.js";import"./maska.f37bce9a.js";import"./Loader.7b3789d0.js";const L=["onClick"],R={__name:"Installations",setup(M){const v=h(),m=new i("/installations"),f=new i("/hardware-devices"),_=new i("/healthcheck-priorities"),u=n(null),b=k([{name:"Nome",field:"name"},{name:"Placa",field:"device_id",formatter:(o,e)=>e.device.name}]),l=n(null),w=()=>{u.value.refresh(),l.value=null},s=n(null),c=n([]),p=n([]);return y(async()=>{const o=await f.getList();c.value=o.data.items.map(a=>({label:a.name,value:a.id}));const e=await _.getList();p.value=e.data.items.map(a=>({label:a.name,value:a.id}))}),(o,e)=>{const a=C("mdicon");return x(),A(g,null,[r(F,{ref_key:"modalForm",ref:s,modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),fields:[{name:"name",label:"Nome",type:"text",rules:"required"},{name:"ip_address",label:"IP Address",type:"text",rules:"required"},{name:"device_id",label:"Dispositivo",type:"select",options:c.value,rules:"required"},{name:"healthcheck_priority_id",label:"Rotina de Verifica\xE7\xE3o",type:"select",options:p.value}],api:d(m),onSaved:w,onClose:e[1]||(e[1]=t=>l.value=null)},null,8,["modelValue","fields","api"]),r(q,{ref_key:"baseList",ref:u,title:"Instala\xE7\xF5es",api:d(m),cols:b,"can-delete":!1,onCreate:e[2]||(e[2]=t=>s.value.openModal(!0)),onEdit:e[3]||(e[3]=t=>{l.value=t,s.value.openModal()})},{"row-actions":B(({row:t})=>[V("button",{class:"btn btn-lg btn-success text-white",onClick:N=>d(v).push({name:"installation",query:{id:t.id}}),title:"Painel de controle"},[r(a,{name:"tune-vertical-variant"})],8,L)]),_:1},8,["api","cols"])],64)}}};export{R as default};
