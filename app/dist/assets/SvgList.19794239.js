import{A as g,r,q as B,b as a,e as i,g as h,w as d,D as k,E as C,d as n,F as _,f as S,t as u,m as x}from"./index.1b9ac310.js";import{_ as E}from"./BaseList.c4cf2941.js";import{B as F}from"./BaseModalForm.55120c06.js";import"./toast.0c2dff22.js";import"./Loader.afb1f864.js";import"./index.59b4e028.js";const U=["onUpdate:modelValue","onChange"],q=n("option",{value:"",disabled:""},"Selecione o tipo",-1),I=["value"],N=["onUpdate:modelValue","disabled"],O=n("option",{value:"",disabled:""},"Selecione o item",-1),A=["value"],D={class:"flex flex-col gap-2"},G={key:0,class:"flex items-center gap-2"},H=["onClick"],P=["onClick"],T={key:1},z=["onChange"],j={class:"modal fade",id:"modal-svg"},J={class:"modal-dialog"},K={class:"text-center"},Q=["innerHTML"],R=["onClick"],W=n("i",{class:"fa fa-cog"},null,-1),X=[W],le={__name:"SvgList",setup(Y){const p=new g("/svgs"),m=r(null),v=r(null),s=r(null),f=r(""),V=B([{name:"#",field:"id"},{name:"Nome",field:"name"},{name:"Sess\xE3o",field:"owner_type"}]),w=[{label:"Galp\xE3o",value:"sheds"},{label:"Cozinha",value:"kitchens"},{label:"Instala\xE7\xE3o",value:"installations"}],$=()=>{m.value.refresh(),s.value=null},M=l=>{f.value=l,new bootstrap.Modal(document.getElementById("modal-svg")).show()},b=r([]),y=async l=>{if(!l)return;const e=await new g(`/${l}`).getList();b.value=(e.data.items||[]).map(t=>({label:t.name,value:t.id}))};return(l,o)=>(a(),i(_,null,[h(F,{ref_key:"modalForm",ref:v,modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),fields:[{name:"name",label:"Nome",type:"text",rules:"required"},{name:"owner_type",label:"Sess\xE3o",slot:"owner_type",rules:"required"},{name:"owner_id",label:"Item",type:"select",slot:"owner_id",rules:"required"},{name:"content",label:"SVG",slot:"content"}],api:x(p),onSaved:$,onClose:o[1]||(o[1]=e=>s.value=null),onEdit:o[2]||(o[2]=e=>y(s.value.owner_type))},{owner_type:d(({model:e})=>[k(n("select",{class:"form-select","onUpdate:modelValue":t=>e.owner_type=t,onChange:t=>y(e.owner_type)},[q,(a(),i(_,null,S(w,t=>n("option",{key:t.value,value:t.value},u(t.label),9,I)),64))],40,U),[[C,e.owner_type]])]),owner_id:d(({model:e})=>[k(n("select",{class:"form-select","onUpdate:modelValue":t=>e.owner_id=t,disabled:!e.owner_type},[O,(a(!0),i(_,null,S(b.value,t=>(a(),i("option",{key:t.value,value:t.value},u(t.label),9,A))),128))],8,N),[[C,e.owner_id]])]),content:d(({model:e})=>[n("div",D,[e.content?(a(),i("div",G,[n("button",{type:"button",class:"btn btn-sm btn-primary ms-2",onClick:t=>M(e.content)}," Mostrar ",8,H),n("button",{type:"button",class:"btn btn-sm btn-secondary ms-2",onClick:t=>e.content=null}," Trocar ",8,P)])):(a(),i("div",T,[n("input",{type:"file",class:"form-control",accept:".svg",onChange:async t=>{const c=t.target.files[0];if(!c)return;const L=await c.text();e.content=L}},null,40,z)]))]),n("div",j,[n("div",J,[n("div",K,[n("div",{innerHTML:f.value,class:"w-full max-h-[80vh] overflow-scroll"},null,8,Q)])])])]),_:1},8,["modelValue","api"]),h(E,{ref_key:"baseList",ref:m,title:"SVGs",api:x(p),cols:V,onCreate:o[3]||(o[3]=e=>v.value.openModal(!0)),onEdit:o[4]||(o[4]=e=>{s.value=e,v.value.openModal()})},{"cell-owner_type":d(({row:e})=>{var t;return[n("span",null,u((t=w.find(c=>c.value===e.owner_type))==null?void 0:t.label)+" - "+u(e.owner_name),1)]}),"row-actions":d(({row:e})=>[n("button",{class:"btn btn-lg btn-primary text-white",onClick:t=>l.$router.push({name:"svg-config",params:{id:e.id}})},X,8,R)]),_:1},8,["api","cols"])],64))}};export{le as default};
