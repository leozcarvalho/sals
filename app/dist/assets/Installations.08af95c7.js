import{B as y,A as d,r as l,q as C,o as g,a as x,b as A,e as B,g as s,m as o,w as V,d as f,F as q}from"./index.25e36820.js";import{_ as F}from"./BaseList.8e13165b.js";import{B as $}from"./BaseModalForm.afca855c.js";import"./toast.4464608c.js";import"./Loader.4eef347d.js";import"./index.8fb258bd.js";import"./maska.f37bce9a.js";const L=["onClick"],M=["onClick"],U={__name:"Installations",setup(N){const m=y(),u=new d("/installations"),b=new d("/hardware-devices"),_=new d("/healthcheck-priorities"),c=l(null),h=C([{name:"Nome",field:"name"},{name:"Placa",field:"device_id",formatter:(r,e)=>e.device.name}]),n=l(null),k=()=>{c.value.refresh(),n.value=null},i=l(null),p=l([]),v=l([]);return g(async()=>{const r=await b.getList();p.value=r.data.items.map(t=>({label:t.name,value:t.id}));const e=await _.getList();v.value=e.data.items.map(t=>({label:t.name,value:t.id}))}),(r,e)=>{const t=x("mdicon");return A(),B(q,null,[s($,{ref_key:"modalForm",ref:i,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),fields:[{name:"name",label:"Nome",type:"text",rules:"required"},{name:"ip_address",label:"IP Address",type:"text",rules:"required"},{name:"device_id",label:"Dispositivo",type:"select",options:p.value,rules:"required"},{name:"healthcheck_priority_id",label:"Rotina de Verifica\xE7\xE3o",type:"select",options:v.value}],api:o(u),onSaved:k,onClose:e[1]||(e[1]=a=>n.value=null)},null,8,["modelValue","fields","api"]),s(F,{ref_key:"baseList",ref:c,title:"Instala\xE7\xF5es",api:o(u),cols:h,"can-delete":!1,onCreate:e[2]||(e[2]=a=>i.value.openModal(!0)),onEdit:e[3]||(e[3]=a=>{n.value=a,i.value.openModal()})},{"row-actions":V(({row:a})=>[f("button",{class:"btn btn-lg btn-success text-white",onClick:w=>o(m).push({name:"installation",query:{id:a.id}}),title:"Painel de controle"},[s(t,{name:"tune-vertical-variant"})],8,L),f("button",{class:"btn btn-lg btn-primary text-white",onClick:w=>o(m).push({name:"installation-valves",params:{id:a.id}}),title:"Editar v\xE1lvulas"},[s(t,{name:"cog"})],8,M)]),_:1},8,["api","cols"])],64)}}};export{U as default};
