import{A as M,_ as V,r,k as x,o as b,b as D,e as C,d as k,l as X,m as S}from"./index.0c67347f.js";class L extends M{constructor(){super("/svgs")}async get(s,a=!1){try{return(await this.api.get(`${this.path}/${s}?replace_variables=${a}`)).data}catch(o){return o.response}}async options(s){try{return(await this.api.get(`${this.path}/${s}/options`)).data}catch(a){return a.response}}async variables(s){try{return(await this.api.get(`${this.path}/${s}/variables`)).data}catch(a){return a.response}}async getOwnerSvgId(s,a){try{return(await this.api.get(`${this.path}/owner/${s}/${a}`)).data}catch(o){return o.response}}}const Y=["innerHTML"],G={__name:"SVGView",props:{svg:{type:String,default:""},src:{type:String,default:""},autoFetch:{type:Boolean,default:!0},scale:{type:Number,default:1},minScale:{type:Number,default:.5},maxScale:{type:Number,default:3}},setup(v){const s=v,a=r(null),o=r(s.svg||""),i=r(!1),p=r({x:0,y:0}),h=r({left:0,top:0}),l=r(s.scale);x(()=>s.svg,e=>o.value=e||""),x(()=>s.src,async e=>{e&&await f(e)},{immediate:!0});async function f(e){try{const t=await fetch(e);if(!t.ok)throw new Error("fetch failed");const n=await t.text();o.value=n}catch(t){console.error("Erro ao carregar SVG:",t)}}b(async()=>{!o.value&&s.autoFetch&&s.src&&await f(s.src)});let c=null;const d=e=>{const[t,n]=e;return Math.hypot(n.clientX-t.clientX,n.clientY-t.clientY)},g=e=>{const[t,n]=e;return{x:(t.clientX+n.clientX)/2,y:(t.clientY+n.clientY)/2}},y=e=>{if(!a.value)return;if(e.touches&&e.touches.length===2){c=d(e.touches),g(e.touches);return}const t=e.touches?e.touches[0]:e;i.value=!0,p.value={x:t.clientX,y:t.clientY},h.value={left:a.value.scrollLeft,top:a.value.scrollTop}},m=e=>{if(!a.value)return;if(e.touches&&e.touches.length===2){const w=d(e.touches);if(g(e.touches),c){const $=w/c;l.value=Math.min(s.maxScale,Math.max(s.minScale,l.value*$))}c=w;return}if(!i.value)return;const t=e.touches?e.touches[0]:e,n=t.clientX-p.value.x,T=t.clientY-p.value.y;a.value.scrollLeft=h.value.left-n,a.value.scrollTop=h.value.top-T},u=e=>{i.value=!1,c=null},_=(()=>{let e=0;return()=>{const t=Date.now();t-e<300&&(l.value=s.scale),e=t}})();return(e,t)=>(D(),C("div",{ref_key:"svgContainer",ref:a,class:"svg-wrapper",onMousedown:y,onMousemove:m,onMouseup:u,onMouseleave:u,onTouchstartPassive:y,onTouchmovePassive:m,onTouchendPassive:u,onTouchcancelPassive:u,onClick:t[0]||(t[0]=(...n)=>S(_)&&S(_)(...n))},[k("div",{id:"uploaded-svg",class:"svg-inner",innerHTML:o.value,style:X({transform:`scale(${l.value})`,transformOrigin:"0 0"})},null,12,Y)],544))}},N=V(G,[["__scopeId","data-v-9e8fa8d2"]]);export{L as S,N as a};
