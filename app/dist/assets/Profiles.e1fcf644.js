import{A as g,r as n,q as y,o as V,b as m,e as p,g as f,w,d,F as v,f as C,D as S,K as $,t as B,m as b}from"./index.1de81d9c.js";import{_ as F}from"./BaseList.0cc94f90.js";import{B as M}from"./BaseModalForm.37c03ed5.js";import"./toast.1c03bdcb.js";import"./Loader.5f66cc62.js";import"./index.2f424ca5.js";class L extends g{constructor(){super("/profiles")}async getPermissions(){try{return(await this.api.get(`${this.path}/permissions/all`)).data}catch(l){return l.response}}}const N={class:"d-flex flex-column"},A=["id","value","onUpdate:modelValue"],D=["for"],G={__name:"Profiles",setup(_){const l=new L,c=n(null),i=n(null),a=n(null),k=y([{name:"#",field:"id",sort:""},{name:"Nome",field:"name",sort:""},{name:"Permiss\xF5es",field:"permissions",formatter:(o,e)=>P(e.permissions).join(", "),sort:""}]),x=()=>{c.value.refresh(),a.value=null},u=n([]);V(async()=>{const o=await l.getPermissions();u.value=o.data});const P=o=>o?o.map(e=>{const s=u.value.find(r=>r.value===e);return s?s.label:e}):[];return(o,e)=>(m(),p(v,null,[f(M,{ref_key:"modalForm",ref:i,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),fields:[{name:"name",label:"Nome",type:"text",rules:"required"},{name:"permissions",label:"Permiss\xF5es",slot:"permissionsSlot",multiple:!0}],api:b(l),onSaved:x,onClose:e[1]||(e[1]=s=>a.value=null)},{permissionsSlot:w(({model:s,field:r})=>[d("div",N,[(m(!0),p(v,null,C(u.value,t=>(m(),p("div",{class:"form-check",key:t.value},[S(d("input",{class:"form-check-input",type:"checkbox",id:`perm-${t.value}`,value:t.value,"onUpdate:modelValue":h=>s[r.name]=h},null,8,A),[[$,s[r.name]]]),d("label",{class:"form-check-label",for:`perm-${t.value}`},B(t.label),9,D)]))),128))])]),_:1},8,["modelValue","api"]),f(F,{ref_key:"baseList",ref:c,title:"Perfis",api:b(l),cols:k,onCreate:e[2]||(e[2]=s=>i.value.openModal(!0)),onEdit:e[3]||(e[3]=s=>{a.value=s,i.value.openModal()})},null,8,["api","cols"])],64))}};export{G as default};
