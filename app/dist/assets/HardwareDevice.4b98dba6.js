import{_ as $}from"./BaseList.360694cc.js";import{A as i,r as s,q,o as L,b as d,e as p,g as y,w as A,d as n,m as h,F as B}from"./index.1cfa7469.js";import{B as P}from"./BaseModalForm.58b6ae3a.js";import"./toast.022af5e3.js";import"./index.26f640d7.js";import"./maska.f37bce9a.js";import"./Loader.7b3789d0.js";const V={class:"flex flex-col gap-2"},D={key:0,class:"flex items-center gap-2"},F=["onClick"],H=["onClick"],S={key:1},N=["onChange"],E={class:"modal fade",id:"modal-svg"},O={class:"modal-dialog"},K={class:"text-center"},G=["innerHTML"],X={__name:"HardwareDevice",setup(I){const m=new i("/hardware-devices"),g=new i("/hardware-connection-templates"),b=new i("/hardware-kinds"),k=new i("/hardware-point-types"),c=s(null),T=q([{name:"#",field:"id"},{name:"Nome",field:"name"},{name:"Template",field:"connection_template_id",formatter:(o,e)=>e.connection_template.name},{name:"Tipo",field:"hardware_kind_id",formatter:(o,e)=>e.hardware_kind.kind},{name:"Tipo de Pino",field:"point_type_id",formatter:(o,e)=>`${e.point_type.kind} (${e.point_type.points_quantity})`}]),l=s(null),x=()=>{c.value.refresh(),l.value=null},r=s(null),u=s([]),v=s([]),_=s([]);L(async()=>{const o=await g.getList();u.value=o.data.items.map(t=>({label:t.name,value:t.id}));const e=await b.getList();v.value=e.data.items.map(t=>({label:t.kind,value:t.id}));const a=await k.getList();_.value=a.data.items.map(t=>({label:`${t.points_quantity} (${t.kind})`,value:t.id}))});const f=s(""),C=o=>{f.value=o,new bootstrap.Modal(document.getElementById("modal-svg")).show()};return(o,e)=>(d(),p(B,null,[y(P,{ref_key:"modalForm",ref:r,modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value=a),fields:[{name:"name",label:"Nome",type:"text",rules:"required"},{name:"connection_template_id",label:"Template",type:"select",options:u.value,rules:"required"},{name:"hardware_kind_id",label:"Tipo",type:"select",options:v.value,rules:"required"},{name:"point_type_id",label:"Point Type",type:"select",options:_.value,rules:"required"},{name:"svg_template",label:"SVG Template",slot:"svg_template"}],api:h(m),onSaved:x,onClose:e[1]||(e[1]=a=>l.value=null)},{svg_template:A(({model:a})=>[n("div",V,[a.svg_template?(d(),p("div",D,[n("button",{type:"button",class:"btn btn-sm btn-primary ms-2",onClick:t=>C(a.svg_template)}," Mostrar ",8,F),n("button",{type:"button",class:"btn btn-sm btn-secondary ms-2",onClick:t=>a.svg_template=null}," Trocar ",8,H)])):(d(),p("div",S,[n("input",{type:"file",class:"form-control",accept:".svg",onChange:async t=>{const w=t.target.files[0];if(!w)return;const M=await w.text();a.svg_template=M}},null,40,N)]))]),n("div",E,[n("div",O,[n("div",K,[n("div",{innerHTML:f.value,class:"w-full max-h-[80vh] overflow-auto"},null,8,G)])])])]),_:1},8,["modelValue","fields","api"]),y($,{ref_key:"baseList",ref:c,title:"Dispositivos de Hardware",api:h(m),cols:T,onCreate:e[2]||(e[2]=a=>r.value.openModal(!0)),onEdit:e[3]||(e[3]=a=>{l.value=a,r.value.openModal()})},null,8,["api","cols"])],64))}};export{X as default};
