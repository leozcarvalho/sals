import{A as M,_ as V,r,k as h,i as D,o as k,b as C,e as X,d as Y,l as G,m as b}from"./index.89030e27.js";class N extends M{constructor(){super("/svgs")}async get(s,a=!1){try{return(await this.api.get(`${this.path}/${s}?replace_variables=${a}`)).data}catch(o){return o.response}}async options(s){try{return(await this.api.get(`${this.path}/${s}/options`)).data}catch(a){return a.response}}async variables(s){try{return(await this.api.get(`${this.path}/${s}/variables`)).data}catch(a){return a.response}}async getOwnerSvgId(s,a){try{return(await this.api.get(`${this.path}/owner/${s}/${a}`)).data}catch(o){return o.response}}}const B={__name:"SVGView",props:{svg:{type:String,default:""},src:{type:String,default:""},autoFetch:{type:Boolean,default:!0},scale:{type:Number,default:1},minScale:{type:Number,default:.5},maxScale:{type:Number,default:3}},setup(f){const s=f,a=r(null),o=r(s.svg||""),i=r(!1),p=r({x:0,y:0}),v=r({left:0,top:0}),l=r(s.scale);h(()=>s.svg,e=>o.value=e||""),h(()=>s.src,async e=>{e&&await d(e)},{immediate:!0}),h(()=>s.svg,async e=>{o.value=e||"",await D(),g()},{immediate:!0});const g=()=>{var n;const e=(n=a.value)==null?void 0:n.querySelector(".svg-inner");if(!e||!o.value)return;e.innerHTML=o.value;const t=e.querySelector("svg");t&&(t.id="uploaded-svg",t.style.height="auto")};async function d(e){try{const t=await fetch(e);if(!t.ok)throw new Error("fetch failed");const n=await t.text();o.value=n}catch(t){console.error("Erro ao carregar SVG:",t)}}k(async()=>{!o.value&&s.autoFetch&&s.src?await d(s.src):g()});let c=null;const y=e=>{const[t,n]=e;return Math.hypot(n.clientX-t.clientX,n.clientY-t.clientY)},m=e=>{const[t,n]=e;return{x:(t.clientX+n.clientX)/2,y:(t.clientY+n.clientY)/2}},w=e=>{if(!a.value)return;if(e.touches&&e.touches.length===2){c=y(e.touches),m(e.touches);return}const t=e.touches?e.touches[0]:e;i.value=!0,p.value={x:t.clientX,y:t.clientY},v.value={left:a.value.scrollLeft,top:a.value.scrollTop}},_=e=>{if(!a.value)return;if(e.touches&&e.touches.length===2){const x=y(e.touches);if(m(e.touches),c){const $=x/c;l.value=Math.min(s.maxScale,Math.max(s.minScale,l.value*$))}c=x;return}if(!i.value)return;const t=e.touches?e.touches[0]:e,n=t.clientX-p.value.x,T=t.clientY-p.value.y;a.value.scrollLeft=v.value.left-n,a.value.scrollTop=v.value.top-T},u=e=>{i.value=!1,c=null},S=(()=>{let e=0;return()=>{const t=Date.now();t-e<300&&(l.value=s.scale),e=t}})();return(e,t)=>(C(),X("div",{ref_key:"svgContainer",ref:a,class:"svg-wrapper",onMousedown:w,onMousemove:_,onMouseup:u,onMouseleave:u,onTouchstartPassive:w,onTouchmovePassive:_,onTouchendPassive:u,onTouchcancelPassive:u,onClick:t[0]||(t[0]=(...n)=>b(S)&&b(S)(...n))},[Y("div",{id:"uploaded-svg",class:"svg-inner",style:G({transform:`scale(${l.value})`,transformOrigin:"0 0"})},null,4)],544))}},P=V(B,[["__scopeId","data-v-20b3bc8b"]]);export{N as S,P as a};
