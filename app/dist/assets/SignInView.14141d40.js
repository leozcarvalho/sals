import{bI as I,_ as S,B,r as P,q as C,s as D,a as E,b as u,e as p,g as h,d as s,w as L,bE as U,D as w,J as A,n as m,m as i,h as _,I as F,F as M,a_ as N,aZ as q,bJ as J}from"./index.0c67347f.js";import{r as f,m as g,u as O}from"./index.4ca7666c.js";import{h as v}from"./toast.54cfe19f.js";import{_ as T}from"./Loader.841c784d.js";const l={},d=I();l.auth=async(e,o)=>{let a=new FormData;a.append("username",e),a.append("password",o);try{return(await d.post("/login",a)).data}catch(r){return r.response}};l.recoveryPassword=async e=>{try{return(await d.patch("/users/recovery-password",{},{params:{email:e}})).data}catch(o){return o.response}};l.createPassword=async e=>{try{return(await d.patch("/users/update-password",e)).data}catch(o){return o.response}};l.saveUser=async e=>{try{return await d.post("/users/save",{user:e})}catch(o){return o.response}};l.updateUser=async(e,o)=>{try{return await d.put(`/users/${e}`,{user:o})}catch(a){return a.response}};l.getCurrentUser=async()=>{try{return await d.get("/users/current/self")}catch(e){return e.response}};const y=e=>(N("data-v-2525f744"),e=e(),q(),e),j={class:"hero-static d-flex align-items-center"},z={class:"content"},R={class:"row justify-content-center push"},Z={class:"col-md-8 col-lg-6 col-xl-4"},G=y(()=>s("div",{class:"text-center p-4"},[s("img",{src:J,alt:"Logo VisioAgro",style:{"max-width":"250px"}})],-1)),H={class:"p-sm-3 px-lg-4 px-xxl-5 py-lg-5"},K=["onSubmit"],Q={class:"mb-4"},W={key:0,class:"invalid-feedback animated fadeIn"},X={class:"input-group"},Y=["type"],ss={key:0,class:"invalid-feedback animated fadeIn"},es=y(()=>s("div",{class:"row mb-5 mt-4"},[s("div",{class:""},[s("button",{class:"btn rounded btn-warning green-dark border-0 text-light w-100"}," Entrar ")])],-1)),rs={__name:"SignInView",setup(e){const o=B(),a=P(!1),r=C({username:null,password:null,showPassword:!1}),b=D(()=>({username:{required:f,minLength:g(3)},password:{required:f,minLength:g(5)}})),n=O(b,r);async function x(){if(!await n.value.$validate()){v({success:!1,message:"Preencha os campos corretamente."});return}a.value.loaderOn();const t=await l.auth(r.username,r.password);v(t,"Login efetuado com sucesso!"),a.value.loaderOff(),t.success&&o.push({name:"home"})}const V=()=>{r.showPassword=!r.showPassword};return($,t)=>{const k=E("BaseBlock");return u(),p(M,null,[h(T,{ref_key:"loader",ref:a},null,512),s("div",j,[s("div",z,[s("div",R,[s("div",Z,[h(k,{title:"",class:"mb-0"},{default:L(()=>[G,s("div",H,[s("form",{onSubmit:U(x,["prevent"])},[s("div",Q,[w(s("input",{type:"text",class:m(["form-control form-control-alt form-control-lg",{"is-invalid":i(n).username.$errors.length}]),id:"login-username",name:"login-username",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=c=>r.username=c),onBlur:t[1]||(t[1]=(...c)=>i(n).username.$touch&&i(n).username.$touch(...c))},null,34),[[A,r.username]]),i(n).username.$errors.length?(u(),p("div",W," Email necess\xE1rio ")):_("",!0)]),s("div",null,[s("div",X,[w(s("input",{type:r.showPassword?"text":"password",class:m(["form-control form-control-alt form-control-lg",{"is-invalid":i(n).password.$errors.length}]),id:"login-password",name:"login-password",placeholder:"Senha","onUpdate:modelValue":t[2]||(t[2]=c=>r.password=c),onBlur:t[3]||(t[3]=(...c)=>i(n).password.$touch&&i(n).password.$touch(...c))},null,42,Y),[[F,r.password]]),s("button",{class:"btn btn-outline-secondary",type:"button",onClick:V},[s("i",{class:m(["fas",{"fa-eye":r.showPassword,"fa-eye-slash":!r.showPassword}])},null,2)])]),i(n).password.$errors.length?(u(),p("div",ss," Senha necess\xE1ria ")):_("",!0)]),es],40,K)])]),_:1})])])])])],64)}}},is=S(rs,[["__scopeId","data-v-2525f744"]]);export{is as default};
